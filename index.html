<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>NyaleHour</title>

  <!-- Ícone da aba -->
  <link rel="icon" type="image/png" href="https://yt3.ggpht.com/Wkx6ZM2gLxvfYE9qWM9mBtbmiwKYxDY3KFNAZmsXOo3pGNKTbc2YzklMjcCCOxOWJ0BHKwXe62DKSw=s326-c-fcrop64=1,06b30000f94cffff-rw-nd-v1"/>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-image: url('https://pbs.twimg.com/media/GrqzxiHWwAAFnWH?format=jpg&name=large');
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
      color: #fff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      overflow: hidden;
    }

    body::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.4);
      backdrop-filter: blur(4px);
      z-index: -1;
    }

    .container {
      background: rgba(0, 0, 0, 0.7);
      border-radius: 15px;
      padding: 30px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
      max-width: 900px;
      width: 90%;
      position: relative;
      overflow: hidden;
    }

    .container::after {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 5px;
      background: linear-gradient(90deg, #00ffff, #0077ff);
    }

    .element {
      transition: all 0.3s ease;
      background: rgba(0, 0, 0, 0.5);
      padding: 20px;
      margin-bottom: 20px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
      border: 1px solid rgba(255, 255, 255, 0.1);
    }

    .element:hover {
      background: rgba(0, 0, 0, 0.6);
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
    }

    h1 {
      font-family: 'Arial Black', sans-serif;
      font-size: 2.5rem;
      font-weight: bold;
      margin-bottom: 5px;
      letter-spacing: 1px;
    }

    .clock-container {
      background: rgba(0, 0, 0, 0.6);
      border-radius: 15px;
      padding: 15px;
      display: inline-block;
      margin-right: 15px;
      box-shadow: inset 0 0 10px rgba(0,0,0,0.3);
    }

    .clock {
      width: 200px;
      height: 200px;
      margin: 0 auto;
      position: relative;
    }

    .clock circle {
      fill: none;
      stroke: rgba(255, 255, 255, 0.8);
      stroke-width: 2;
    }

    .clock line {
      stroke: rgba(255, 255, 255, 0.3);
    }

    .clock .hour {
      stroke: #483D8B;
      stroke-width: 3;
      stroke-linecap: round;
      transition: transform 0.5s cubic-bezier(0.4, 2.5, 0.3, 1);
    }

    .clock .minute {
      stroke: #836FFF;
      stroke-width: 2.5;
      stroke-linecap: round;
      transition: transform 0.5s cubic-bezier(0.4, 2.5, 0.3, 1);
    }

    .clock .second {
      stroke: #FF0000;
      stroke-width: 2;
      stroke-linecap: round;
      transition: transform 0.5s cubic-bezier(0.4, 2.8, 0.3, 1);
    }

    #time {
      font-size: 2.8rem;
      font-weight: bold;
      font-family: 'Arial Black', sans-serif;
      letter-spacing: 2px;
      margin-bottom: 5px;
    }

    #date {
      font-size: 1.5rem;
      font-weight: normal;
      opacity: 0.9;
    }

    #utc {
      font-size: 0.9rem;
      font-weight: bold;
      margin-top: 3px;
      color: #fff;
      position: relative;
      top: -5px;
    }

    #jasper {
      font-family: 'Arial Black', sans-serif;
    }

    .clock-number {
      fill: white;
      font-size: 6px;
      text-anchor: middle;
      dominant-baseline: middle;
      font-family: Arial, sans-serif;
      font-weight: bold;
    }

    .weather-container {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 13px; /* Espaço entre relógio e widget */
    }
    
    .weather-widget {
      width: 350px;
      height: 240px;
      overflow: hidden;
      border-radius: 35px;
    }
    
    .elfsight-app-1320ebf0-180b-4e75-a291-1934a4585675 {
      height: 210px !important;
      margin-top: -12px;
      width: 100% !important;
    }
    
    /* Garante que o widget ocupe todo o espaço */
    .elfsight-app-1320ebf0-180b-4e75-a291-1934a4585675 iframe,
    .elfsight-app-1320ebf0-180b-4e75-a291-1934a4585675 .elfsight-widget-content {
      height: 100% !important;
      width: 100% !important;
      border: none !important;
    }
    
    /* Remove cabeçalho e rodapé do widget */
    .elfsight-app-1320ebf0-180b-4e75-a291-1934a4585675 .elfsight-widget-header,
    .elfsight-app-1320ebf0-180b-4e75-a291-1934a4585675 .elfsight-widget-footer {
      display: none !important;
      height: 0 !important;
    }
    
    /* Centraliza o conteúdo do widget */
    .weather-widget-wrapper {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100%;
    }
      
      .clock-container {
        margin-right: 0;
        margin-bottom: 15px;
      }
      
      h1 {
        font-size: 2rem;
      }
      
      #time {
        font-size: 2rem;
      }
      
      #date {
        font-size: 1.2rem;
      }
    }
  </style>
</head>
<body>
  <div class="container text-center">
    <div class="element">
      <h1>
        <img src="https://d.furaffinity.net/art/nyale0102/1748042253/1748042253.nyale0102_png_eu_boca_abbertaa.png" alt="Nyale" style="width: 100px; height: auto;">
        <span id="jasper">Horário padrão de Brasília</span>
      </h1>
    </div>
    
    <div class="weather-container element">
      <div class="clock-container">
        <div id="clock-container" class="clock">
          <svg id="clock" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
            <circle cx="50" cy="50" r="48"/>
            <line x1="50" y1="50" x2="50" y2="20" class="hour"/>
            <line x1="50" y1="50" x2="50" y2="10" class="minute"/>
            <line x1="50" y1="50" x2="50" y2="5" class="second"/>
            <g id="numbers"></g>
          </svg>
          <div id="utc">UTC -3</div>
        </div>
      </div>
      
      <div class="weather-widget">
        <!-- Widget de Clima -->
        <div class="elfsight-app-1320ebf0-180b-4e75-a291-1934a4585675" data-elfsight-app-lazy></div>
      </div>
    </div>
    
    <div class="element">
      <div id="time"></div>
      <div id="date"></div>
    </div>

    <!-- Áudio para manter a aba ativa (versão otimizada) -->
<audio id="keep-awake-audio" loop></audio>

<!-- Canvas hidden para animação mínima -->
<canvas id="keep-awake-canvas" style="display:none;"></canvas>

<script>
  // Solução robusta para evitar suspensão da aba
  (function() {
    // 1. Configuração do áudio silencioso
    const audio = document.getElementById('keep-awake-audio');
    const audioContext = new (window.AudioContext || window.webkitAudioContext)();
    let source;
    
    // Criar um áudio silencioso programaticamente
    function createSilentAudio() {
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      oscillator.type = 'sine';
      oscillator.frequency.value = 0.1; // Frequência quase inaudível
      gainNode.gain.value = 0; // Volume zero
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      oscillator.start();
      return oscillator;
    }
    
    // 2. Web Worker para manter CPU ativa
    const keepAliveWorker = `
      setInterval(() => {
        // Fazer um cálculo simples periodicamente
        for(let i = 0; i < 1000000; i++) {
          Math.random();
        }
        postMessage('keepAlive');
      }, 20000);
    `;
    
    const blob = new Blob([keepAliveWorker], {type: 'application/javascript'});
    const worker = new Worker(URL.createObjectURL(blob));
    
    // 3. Animação mínima no canvas
    const canvas = document.getElementById('keep-awake-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = 1;
    canvas.height = 1;
    let x = 0;
    
    function animateCanvas() {
      x = (x + 0.01) % 1;
      ctx.fillStyle = `rgba(0,0,0,${x})`;
      ctx.fillRect(0, 0, 1, 1);
      requestAnimationFrame(animateCanvas);
    }
    
    // Iniciar todas as técnicas
    function startKeepAlive() {
      try {
        // Técnica do áudio
        source = createSilentAudio();
        
        // Técnica do canvas
        animateCanvas();
        
        // Técnica do worker já está rodando
      } catch(e) {
        console.log('Keep-alive error:', e);
      }
    }
    
    // Iniciar quando o usuário interagir (requerido por alguns navegadores)
    function handleUserInteraction() {
      startKeepAlive();
      document.removeEventListener('click', handleUserInteraction);
      document.removeEventListener('touchstart', handleUserInteraction);
      document.removeEventListener('keydown', handleUserInteraction);
    }
    
    document.addEventListener('click', handleUserInteraction);
    document.addEventListener('touchstart', handleUserInteraction);
    document.addEventListener('keydown', handleUserInteraction);
    
    // Se já houve interação, iniciar imediatamente
    if (document.hasFocus()) {
      startKeepAlive();
    }
    
    // Limpar quando a página for fechada
    window.addEventListener('beforeunload', () => {
      if (source) source.stop();
      worker.terminate();
    });
  })();
</script>

    <script>

      const timeZone = "America/Sao_Paulo";

      function updateTime() {
        const now = new Date(new Date().toLocaleString("en-US", { timeZone }));
        let hours = now.getHours();
        const minutes = now.getMinutes();
        const seconds = now.getSeconds();
        const ampm = hours >= 12 ? 'PM' : 'AM';

        let displayHours = hours % 12;
        displayHours = displayHours ? displayHours : 12;

        document.getElementById('time').innerText =
          `${displayHours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')} ${ampm}`;
        document.getElementById('date').innerText = now.toLocaleDateString('pt-BR', {
          weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'
        });

        const hourHand = document.querySelector('.hour');
        const minuteHand = document.querySelector('.minute');
        const secondHand = document.querySelector('.second');

        const hourAngle = ((hours % 12) + minutes / 60) * 30;
        const minuteAngle = minutes * 6;
        const secondAngle = seconds * 6;

        setHandPosition(hourHand, hourAngle, 20);
        setHandPosition(minuteHand, minuteAngle, 30);
        setHandPosition(secondHand, secondAngle, 40);
      }

      function setHandPosition(element, angle, length) {
        const rad = (angle - 90) * Math.PI / 180;
        const x = 50 + length * Math.cos(rad);
        const y = 50 + length * Math.sin(rad);
        element.setAttribute('x2', x);
        element.setAttribute('y2', y);
      }

      function drawNumbers() {
        const svg = document.getElementById('numbers');
        for (let i = 1; i <= 12; i++) {
          const angle = (i - 3) * 30 * Math.PI / 180;
          const x = 50 + 40 * Math.cos(angle);
          const y = 50 + 40 * Math.sin(angle);
          const text = document.createElementNS("http://www.w3.org/2000/svg", "text");
          text.setAttribute("x", x);
          text.setAttribute("y", y);
          text.setAttribute("class", "clock-number");
          text.textContent = i;
          svg.appendChild(text);
        }
      }

      setInterval(updateTime, 1000);
      updateTime();
      drawNumbers();
      
      // Script para remover o logo do widget de clima após carregamento
      function removeWidgetLogo() {
        const observer = new MutationObserver(() => {
          const widgetHeader = document.querySelector('.elfsight-app-1320ebf0-180b-4e75-a291-1934a4585675 .elfsight-widget-header');
          const widgetFooter = document.querySelector('.elfsight-app-1320ebf0-180b-4e75-a291-1934a4585675 .elfsight-widget-footer');
          
          if (widgetHeader) widgetHeader.style.display = 'none';
          if (widgetFooter) widgetFooter.style.display = 'none';
          
          if (widgetHeader || widgetFooter) {
            observer.disconnect();
          }
        });
        
        observer.observe(document.body, {
          childList: true,
          subtree: true
        });
      }
      
      // Carrega o script do widget de clima
      const weatherScript = document.createElement('script');
      weatherScript.src = 'https://static.elfsight.com/platform/platform.js';
      weatherScript.async = true;
      weatherScript.onload = removeWidgetLogo;
      document.head.appendChild(weatherScript);
    </script>
  </div>
</body>
</html>
